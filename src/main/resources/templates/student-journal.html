<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ñ—É—Ä–Ω–∞–ª ‚Äî [[${student.fullname}]]</title>
    <link rel="stylesheet" th:href="@{/dashboard.css}">

    <style>
        /* =================== TOP ACTION BAR =================== */
        .top-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.03);
            padding: 16px 22px;
            border-radius: 18px;
            border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(8px);
            margin-bottom: 22px;
        }

        .left-actions, .right-actions {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .top-btn {
            padding: 9px 16px;
            background: #0f172a;
            border: 1px solid #1e293b;
            border-radius: 12px;
            color: #bfdbfe;
            font-size: 14px;
            transition: .15s;
        }
        .top-btn:hover {
            background: #1e293b;
        }

        .top-btn.primary {
            background: #2563eb;
            color: #fff;
            border-color: #2563eb;
        }
        .top-btn.primary:hover {
            background: #1d4ed8;
        }

        .top-pill {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 9px 18px;
            background: #020617;
            border-radius: 999px;
            border: 1px solid #1e293b;
            font-size: 14px;
            color: #e5e7eb;
        }

        .top-pill .value {
            background: rgba(59,130,246,0.15);
            border: 1px solid rgba(59,130,246,0.35);
            padding: 4px 12px;
            border-radius: 999px;
            font-weight: 600;
            color: #bfdbfe;
            min-width: 42px;
            text-align: center;
        }

        /* =================== JOURNAL CARDS =================== */

        .section-card {
            background: #020617;
            border: 1px solid #1e293b;
            border-radius: 18px;
            padding: 22px 28px;
            margin-bottom: 28px;
            box-shadow: 0 18px 35px rgba(15,23,42,0.6);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title::before {
            content: "";
            width: 6px;
            height: 18px;
            border-radius: 4px;
            background: #3b82f6;
        }

        /* TABLE */
        .grid-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .grid-table th {
            color: #9ca3af;
            font-size: 13px;
            padding: 8px 0;
            border-bottom: 1px solid #1f2937;
            text-align: center;
        }

        .grid-table td {
            padding: 8px 0;
            font-size: 14px;
            border-bottom: 1px solid #1f2937;
            text-align: center;
        }

        /* SCORE COLORS */
        .score       { color: #60a5fa; font-weight: 600; }
        .score-miss  { color: #ef4444; font-weight: 700; } /* –ù */
        .score-np    { color: #6b7280; font-weight: 600; opacity: 0.85; } /* –ù.–ü */

        /* SELECT */
        .selector {
            background: #020617;
            border: 1px solid #1e293b;
            border-radius: 12px;
            padding: 10px 14px;
            color: #e5e7eb;
            width: 320px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .label {
            font-size: 13px;
            color: #9ca3af;
            margin-bottom: 6px;
        }

    </style>
</head>

<body>
<div class="page-wrapper">

    <div class="main">

        <!-- ===================== TOP BAR ===================== -->
        <div class="top-actions">

            <div class="left-actions">
                <a href="/student/dashboard" class="top-btn">‚Üê –ù–∞–∑–∞–¥</a>

                <div class="top-pill">
                    –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª:
                    <span class="value" th:text="${avg}">0.0</span>
                </div>
            </div>

            <div class="right-actions">
                <a href="/student/report" class="top-btn primary">üìÑ –û—Ç—á—ë—Ç –∑–∞ —Å–µ–º–µ—Å—Ç—Ä</a>
            </div>

        </div>

        <!-- ===================== SUBJECT SELECT ===================== -->

        <div class="label">–ü—Ä–µ–¥–º–µ—Ç</div>

        <form method="get" action="/student/journal">
            <select name="subject" class="selector" onchange="this.form.submit()">
                <option th:each="s : ${subjects}"
                        th:value="${s}"
                        th:selected="${s == subject}"
                        th:text="${s}">
                </option>
            </select>
        </form>


        <!-- ===================== NED 1‚Äì7 ===================== -->

        <div class="section-card">
            <div class="section-title">–ù–µ–¥–µ–ª–∏ 1‚Äì7</div>

            <table class="grid-table">
                <thead>
                    <tr>
                        <th>–¢–∏–ø</th>
                        <th th:each="i : ${#numbers.sequence(1,7)}" th:text="${i}"></th>
                    </tr>
                </thead>

                <tbody>

                <!-- –õ–µ–∫—Ü–∏–∏ -->
                <tr>
                    <td>–õ–µ–∫—Ü–∏—è</td>
                    <td th:each="i : ${#numbers.sequence(1,7)}">
                        <span th:with="v=${table['week' + i + '_lecture']}"
                              th:class="${v == -1} ? 'score-miss' 
                                       : (${v == -2} ? 'score-np' : 'score')"
                              th:text="${v == -1 ? '–ù' : (v == -2 ? '–ù.–ü' : v)}"></span>
                    </td>
                </tr>

                <!-- –°–†–û -->
                <tr>
                    <td>–°–†–û</td>
                    <td th:each="i : ${#numbers.sequence(1,7)}">
                        <span th:with="v=${table['week' + i + '_sro']}"
                              th:class="${v == -1} ? 'score-miss'
                                       : (${v == -2} ? 'score-np' : 'score')"
                              th:text="${v == -1 ? '–ù' : (v == -2 ? '–ù.–ü' : v)}"></span>
                    </td>
                </tr>

                <!-- –õ–∞–± -->
                <tr>
                    <td>–õ–∞–±. —Ä–∞–±–æ—Ç–∞</td>
                    <td th:each="i : ${#numbers.sequence(1,7)}">
                        <span th:with="v=${table['week' + i + '_lab']}"
                              th:class="${v == -1} ? 'score-miss'
                                       : (${v == -2} ? 'score-np' : 'score')"
                              th:text="${v == -1 ? '–ù' : (v == -2 ? '–ù.–ü' : v)}"></span>
                    </td>
                </tr>

                </tbody>
            </table>
        </div>


        <!-- ===================== –¢–ö1 ===================== -->

        <div class="section-card">
            <div class="section-title">–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å 1</div>

            <table class="grid-table">
                <thead>
                <tr>
                    <th>–¢–ö1</th>
                    <th>–†–ö1</th>
                    <th>–†1</th>
                </tr>
                </thead>

                <tbody>
                <tr>
                    <td><span class="score" th:text="${table['tk1']}"></span></td>
                    <td><span class="score" th:text="${table['rk1']}"></span></td>
                    <td><span class="score" th:text="${table['r1']}"></span></td>
                </tr>
                </tbody>
            </table>
        </div>


        <!-- ===================== NED 8‚Äì15 ===================== -->

        <div class="section-card">
            <div class="section-title">–ù–µ–¥–µ–ª–∏ 8‚Äì15</div>

            <table class="grid-table">
                <thead>
                <tr>
                    <th>–¢–∏–ø</th>
                    <th th:each="i : ${#numbers.sequence(8,15)}" th:text="${i}"></th>
                </tr>
                </thead>

                <tbody>

                <tr>
                    <td>–õ–µ–∫—Ü–∏—è</td>
                    <td th:each="i : ${#numbers.sequence(8,15)}">
                        <span th:with="v=${table['week' + i + '_lecture']}"
                              th:class="${v == -1} ? 'score-miss'
                                       : (${v == -2} ? 'score-np' : 'score')"
                              th:text="${v == -1 ? '–ù' : (v == -2 ? '–ù.–ü' : v)}"></span>
                    </td>
                </tr>

                <tr>
                    <td>–°–†–û</td>
                    <td th:each="i : ${#numbers.sequence(8,15)}">
                        <span th:with="v=${table['week' + i + '_sro']}"
                              th:class="${v == -1} ? 'score-miss'
                                       : (${v == -2} ? 'score-np' : 'score')"
                              th:text="${v == -1 ? '–ù' : (v == -2 ? '–ù.–ü' : v)}"></span>
                    </td>
                </tr>

                <tr>
                    <td>–õ–∞–±. —Ä–∞–±–æ—Ç–∞</td>
                    <td th:each="i : ${#numbers.sequence(8,15)}">
                        <span th:with="v=${table['week' + i + '_lab']}"
                              th:class="${v == -1} ? 'score-miss'
                                       : (${v == -2} ? 'score-np' : 'score')"
                              th:text="${v == -1 ? '–ù' : (v == -2 ? '–ù.–ü' : v)}"></span>
                    </td>
                </tr>

                </tbody>
            </table>
        </div>


        <!-- ===================== –¢–ö2 ===================== -->

        <div class="section-card">
            <div class="section-title">–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å 2</div>

            <table class="grid-table">
                <thead>
                <tr>
                    <th>–¢–ö2</th>
                    <th>–†–ö2</th>
                    <th>–†2</th>
                    <th>–î–æ–ø—É—Å–∫</th>
                    <th>–≠–∫–∑–∞–º–µ–Ω</th>
                    <th>–ò—Ç–æ–≥</th>
                </tr>
                </thead>

                <tbody>
                <tr>
                    <td><span class="score" th:text="${table['tk2']}"></span></td>
                    <td><span class="score" th:text="${table['rk2']}"></span></td>
                    <td><span class="score" th:text="${table['r2']}"></span></td>
                    <td><span class="score" th:text="${table['dopusk']}"></span></td>
                    <td><span class="score" th:text="${table['exam']}"></span></td>
                    <td><span class="score" th:text="${table['FINAL']}"></span></td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>

</body>
</html>
